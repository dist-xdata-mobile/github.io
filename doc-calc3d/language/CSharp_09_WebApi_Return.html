<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebApi 接口返回值详解 | Fellow Travellers</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/assets/img/favicon.ico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <meta name="description" content="Fellow-Travellers documents for tech3D / mobile / calc / back-end">
    <link rel="preload" href="/assets/css/0.styles.d4a3a82a.css" as="style"><link rel="preload" href="/assets/js/app.16cdc938.js" as="script"><link rel="preload" href="/assets/js/3.4f14b16d.js" as="script"><link rel="preload" href="/assets/js/1.02cf7ae9.js" as="script"><link rel="preload" href="/assets/js/94.ebd37258.js" as="script"><link rel="prefetch" href="/assets/js/10.f5269c4e.js"><link rel="prefetch" href="/assets/js/100.c7e247ff.js"><link rel="prefetch" href="/assets/js/101.b60225bc.js"><link rel="prefetch" href="/assets/js/102.adacab9e.js"><link rel="prefetch" href="/assets/js/103.32cd0f3b.js"><link rel="prefetch" href="/assets/js/104.1fd9ea1d.js"><link rel="prefetch" href="/assets/js/105.5bfce959.js"><link rel="prefetch" href="/assets/js/106.44ca9c1d.js"><link rel="prefetch" href="/assets/js/107.9ee3fdbe.js"><link rel="prefetch" href="/assets/js/108.2e6ba386.js"><link rel="prefetch" href="/assets/js/109.12b4497c.js"><link rel="prefetch" href="/assets/js/11.9161989f.js"><link rel="prefetch" href="/assets/js/110.d255fdda.js"><link rel="prefetch" href="/assets/js/111.64c62930.js"><link rel="prefetch" href="/assets/js/112.6a427f04.js"><link rel="prefetch" href="/assets/js/113.5ec41ed5.js"><link rel="prefetch" href="/assets/js/114.d289af71.js"><link rel="prefetch" href="/assets/js/115.b052778b.js"><link rel="prefetch" href="/assets/js/116.f20d5acd.js"><link rel="prefetch" href="/assets/js/117.759b608c.js"><link rel="prefetch" href="/assets/js/118.a00460b4.js"><link rel="prefetch" href="/assets/js/119.021cbb12.js"><link rel="prefetch" href="/assets/js/12.e1aacb47.js"><link rel="prefetch" href="/assets/js/120.5bd8b71f.js"><link rel="prefetch" href="/assets/js/121.3e722ff2.js"><link rel="prefetch" href="/assets/js/122.a825e6c4.js"><link rel="prefetch" href="/assets/js/123.ff402ce6.js"><link rel="prefetch" href="/assets/js/124.287761b7.js"><link rel="prefetch" href="/assets/js/125.b4048370.js"><link rel="prefetch" href="/assets/js/126.bef086fd.js"><link rel="prefetch" href="/assets/js/127.a0784eab.js"><link rel="prefetch" href="/assets/js/128.66f3cbc1.js"><link rel="prefetch" href="/assets/js/129.aef33c57.js"><link rel="prefetch" href="/assets/js/13.faee7a70.js"><link rel="prefetch" href="/assets/js/130.0fbb1019.js"><link rel="prefetch" href="/assets/js/131.61f2146b.js"><link rel="prefetch" href="/assets/js/132.3d912bd8.js"><link rel="prefetch" href="/assets/js/133.b688ed34.js"><link rel="prefetch" href="/assets/js/134.59d26e48.js"><link rel="prefetch" href="/assets/js/135.2d1de6ca.js"><link rel="prefetch" href="/assets/js/136.82c509c1.js"><link rel="prefetch" href="/assets/js/137.aa6f5b18.js"><link rel="prefetch" href="/assets/js/138.8f50bb93.js"><link rel="prefetch" href="/assets/js/139.83f80acb.js"><link rel="prefetch" href="/assets/js/14.5e1b322f.js"><link rel="prefetch" href="/assets/js/140.255a8042.js"><link rel="prefetch" href="/assets/js/141.a7ad537d.js"><link rel="prefetch" href="/assets/js/142.b0c92d9c.js"><link rel="prefetch" href="/assets/js/143.f15b1f80.js"><link rel="prefetch" href="/assets/js/144.813a5a2e.js"><link rel="prefetch" href="/assets/js/145.b7069ddf.js"><link rel="prefetch" href="/assets/js/146.9fcc40e8.js"><link rel="prefetch" href="/assets/js/147.654c12e8.js"><link rel="prefetch" href="/assets/js/148.d2104b86.js"><link rel="prefetch" href="/assets/js/149.16115bff.js"><link rel="prefetch" href="/assets/js/15.c64a0296.js"><link rel="prefetch" href="/assets/js/150.e19d3aa4.js"><link rel="prefetch" href="/assets/js/151.e1e9732d.js"><link rel="prefetch" href="/assets/js/152.e4d9ed7c.js"><link rel="prefetch" href="/assets/js/153.720bddec.js"><link rel="prefetch" href="/assets/js/154.6d76f159.js"><link rel="prefetch" href="/assets/js/155.56639bb5.js"><link rel="prefetch" href="/assets/js/156.1b1456ad.js"><link rel="prefetch" href="/assets/js/157.41735b3f.js"><link rel="prefetch" href="/assets/js/158.2f7e2a71.js"><link rel="prefetch" href="/assets/js/159.8ecf5123.js"><link rel="prefetch" href="/assets/js/16.f13c1a4b.js"><link rel="prefetch" href="/assets/js/160.dd6f3d5e.js"><link rel="prefetch" href="/assets/js/161.ba4d9a7f.js"><link rel="prefetch" href="/assets/js/162.297aea0d.js"><link rel="prefetch" href="/assets/js/163.e34450b7.js"><link rel="prefetch" href="/assets/js/164.34381886.js"><link rel="prefetch" href="/assets/js/165.d4c2775d.js"><link rel="prefetch" href="/assets/js/166.c4c9cefb.js"><link rel="prefetch" href="/assets/js/167.d323a0a9.js"><link rel="prefetch" href="/assets/js/168.c20012b9.js"><link rel="prefetch" href="/assets/js/169.3cfddb83.js"><link rel="prefetch" href="/assets/js/17.e99ac461.js"><link rel="prefetch" href="/assets/js/170.3d3526f6.js"><link rel="prefetch" href="/assets/js/171.bba7cce9.js"><link rel="prefetch" href="/assets/js/172.8fbda3bd.js"><link rel="prefetch" href="/assets/js/173.1532f8d6.js"><link rel="prefetch" href="/assets/js/174.638e5e0a.js"><link rel="prefetch" href="/assets/js/175.d8d82e12.js"><link rel="prefetch" href="/assets/js/176.4b3a122c.js"><link rel="prefetch" href="/assets/js/177.3d9e6e89.js"><link rel="prefetch" href="/assets/js/178.58b1bf9b.js"><link rel="prefetch" href="/assets/js/179.3fc5f21a.js"><link rel="prefetch" href="/assets/js/18.2df0d7da.js"><link rel="prefetch" href="/assets/js/180.436cb2b1.js"><link rel="prefetch" href="/assets/js/181.dadcbdd8.js"><link rel="prefetch" href="/assets/js/182.d7f00bd5.js"><link rel="prefetch" href="/assets/js/183.b6a49ebe.js"><link rel="prefetch" href="/assets/js/184.72f1e1df.js"><link rel="prefetch" href="/assets/js/185.a30e0b04.js"><link rel="prefetch" href="/assets/js/186.a89aa666.js"><link rel="prefetch" href="/assets/js/187.c7601a79.js"><link rel="prefetch" href="/assets/js/188.47d25cdd.js"><link rel="prefetch" href="/assets/js/189.a5220877.js"><link rel="prefetch" href="/assets/js/19.74c2fe85.js"><link rel="prefetch" href="/assets/js/190.7fea63c8.js"><link rel="prefetch" href="/assets/js/191.79188b69.js"><link rel="prefetch" href="/assets/js/192.91858bc5.js"><link rel="prefetch" href="/assets/js/193.f8c9dc11.js"><link rel="prefetch" href="/assets/js/194.db5d514f.js"><link rel="prefetch" href="/assets/js/195.a21dfa21.js"><link rel="prefetch" href="/assets/js/196.3deca662.js"><link rel="prefetch" href="/assets/js/197.a26c6a57.js"><link rel="prefetch" href="/assets/js/198.199de2a9.js"><link rel="prefetch" href="/assets/js/199.3a93f5fd.js"><link rel="prefetch" href="/assets/js/20.37ef7b5a.js"><link rel="prefetch" href="/assets/js/200.2e0ca284.js"><link rel="prefetch" href="/assets/js/201.43159287.js"><link rel="prefetch" href="/assets/js/202.47ac18b9.js"><link rel="prefetch" href="/assets/js/21.8edf360c.js"><link rel="prefetch" href="/assets/js/22.681f9ff8.js"><link rel="prefetch" href="/assets/js/23.102f38f3.js"><link rel="prefetch" href="/assets/js/24.0d068097.js"><link rel="prefetch" href="/assets/js/25.b8c6fba0.js"><link rel="prefetch" href="/assets/js/26.b76fcccf.js"><link rel="prefetch" href="/assets/js/27.b95d8356.js"><link rel="prefetch" href="/assets/js/28.425d53a0.js"><link rel="prefetch" href="/assets/js/29.49ae4d56.js"><link rel="prefetch" href="/assets/js/30.268326de.js"><link rel="prefetch" href="/assets/js/31.d1322ccd.js"><link rel="prefetch" href="/assets/js/32.6baff7b9.js"><link rel="prefetch" href="/assets/js/33.91599495.js"><link rel="prefetch" href="/assets/js/34.7d1e8694.js"><link rel="prefetch" href="/assets/js/35.a28b2867.js"><link rel="prefetch" href="/assets/js/36.926c21b7.js"><link rel="prefetch" href="/assets/js/37.00738964.js"><link rel="prefetch" href="/assets/js/38.c07a024e.js"><link rel="prefetch" href="/assets/js/39.23ab4214.js"><link rel="prefetch" href="/assets/js/4.79366a86.js"><link rel="prefetch" href="/assets/js/40.47c89362.js"><link rel="prefetch" href="/assets/js/41.0e9b77b3.js"><link rel="prefetch" href="/assets/js/42.e93c36a9.js"><link rel="prefetch" href="/assets/js/43.8e4bef73.js"><link rel="prefetch" href="/assets/js/44.f5808021.js"><link rel="prefetch" href="/assets/js/45.3afe2dae.js"><link rel="prefetch" href="/assets/js/46.f597a77f.js"><link rel="prefetch" href="/assets/js/47.11f2d487.js"><link rel="prefetch" href="/assets/js/48.7fef6ef8.js"><link rel="prefetch" href="/assets/js/49.b2d21efe.js"><link rel="prefetch" href="/assets/js/5.9ee91412.js"><link rel="prefetch" href="/assets/js/50.5832583c.js"><link rel="prefetch" href="/assets/js/51.54c00e7a.js"><link rel="prefetch" href="/assets/js/52.bd5535f0.js"><link rel="prefetch" href="/assets/js/53.0d38f84a.js"><link rel="prefetch" href="/assets/js/54.65144b95.js"><link rel="prefetch" href="/assets/js/55.368817a9.js"><link rel="prefetch" href="/assets/js/56.04e15523.js"><link rel="prefetch" href="/assets/js/57.b41a7dc6.js"><link rel="prefetch" href="/assets/js/58.0f0d92dd.js"><link rel="prefetch" href="/assets/js/59.e7dddc9e.js"><link rel="prefetch" href="/assets/js/6.b921ef33.js"><link rel="prefetch" href="/assets/js/60.4038bd0b.js"><link rel="prefetch" href="/assets/js/61.5d51e956.js"><link rel="prefetch" href="/assets/js/62.786b095c.js"><link rel="prefetch" href="/assets/js/63.9da19a49.js"><link rel="prefetch" href="/assets/js/64.48f50f07.js"><link rel="prefetch" href="/assets/js/65.0fd7ee4a.js"><link rel="prefetch" href="/assets/js/66.5d68a363.js"><link rel="prefetch" href="/assets/js/67.f4882da2.js"><link rel="prefetch" href="/assets/js/68.224daefc.js"><link rel="prefetch" href="/assets/js/69.420801b1.js"><link rel="prefetch" href="/assets/js/7.e128bbee.js"><link rel="prefetch" href="/assets/js/70.1e62f96f.js"><link rel="prefetch" href="/assets/js/71.62f9fa7c.js"><link rel="prefetch" href="/assets/js/72.ad20df74.js"><link rel="prefetch" href="/assets/js/73.e16fef7c.js"><link rel="prefetch" href="/assets/js/74.c1f72d12.js"><link rel="prefetch" href="/assets/js/75.e1f28980.js"><link rel="prefetch" href="/assets/js/76.2c304c87.js"><link rel="prefetch" href="/assets/js/77.7265d1f0.js"><link rel="prefetch" href="/assets/js/78.c7c2fdd3.js"><link rel="prefetch" href="/assets/js/79.0be55b5d.js"><link rel="prefetch" href="/assets/js/8.b17d0b27.js"><link rel="prefetch" href="/assets/js/80.3c460019.js"><link rel="prefetch" href="/assets/js/81.972b58cd.js"><link rel="prefetch" href="/assets/js/82.6c4d50e0.js"><link rel="prefetch" href="/assets/js/83.89ff3b39.js"><link rel="prefetch" href="/assets/js/84.5629cfb0.js"><link rel="prefetch" href="/assets/js/85.78a9bc3f.js"><link rel="prefetch" href="/assets/js/86.b429e7fb.js"><link rel="prefetch" href="/assets/js/87.5c3ba926.js"><link rel="prefetch" href="/assets/js/88.52737753.js"><link rel="prefetch" href="/assets/js/89.696bb63f.js"><link rel="prefetch" href="/assets/js/9.0874a43d.js"><link rel="prefetch" href="/assets/js/90.60296dbe.js"><link rel="prefetch" href="/assets/js/91.2d2fd4df.js"><link rel="prefetch" href="/assets/js/92.d860f080.js"><link rel="prefetch" href="/assets/js/93.b341ebd9.js"><link rel="prefetch" href="/assets/js/95.15dbfc06.js"><link rel="prefetch" href="/assets/js/96.041d049b.js"><link rel="prefetch" href="/assets/js/97.e22ed305.js"><link rel="prefetch" href="/assets/js/98.2e23ad42.js"><link rel="prefetch" href="/assets/js/99.e886cd85.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d4a3a82a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar shadow"><div class="con-btns-header"><a href="/" class="home-link router-link-active"><div class="con-logo"><!----> <span class="site-name">Fellow Travellers</span></div></a> <div class="links"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link" data-v-e7cf42d2>主页</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">三维</span></a> <ul class="nav-dropdown"><li class="dropdown-item"><!----> <a href="/doc-tech3d/start/" class="nav-link" data-v-e7cf42d2>入门手册</a></li><li class="dropdown-item"><!----> <a href="/doc-tech3d/language/Micro-frontend_Start.html" class="nav-link" data-v-e7cf42d2>开发语言</a></li><li class="dropdown-item"><!----> <a href="/doc-tech3d/production/" class="nav-link" data-v-e7cf42d2>产品</a></li><li class="dropdown-item"><!----> <a href="/doc-tech3d/codelab/Principle_of_Visualizatio_for_WebGL.html" class="nav-link" data-v-e7cf42d2>专题</a></li><li class="dropdown-item"><!----> <a href="/doc-tech3d/other/SuperMap_Questions_and_Answer.html" class="nav-link" data-v-e7cf42d2>其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端</span></a> <ul class="nav-dropdown"><li class="dropdown-item"><!----> <a href="/doc-frontend/start/" class="nav-link" data-v-e7cf42d2>入门手册</a></li><li class="dropdown-item"><!----> <a href="/doc-frontend/base/EC_ScopChain_Closure.html" class="nav-link" data-v-e7cf42d2>开发基础</a></li><li class="dropdown-item"><!----> <a href="/doc-frontend/web-gis/" class="nav-link" data-v-e7cf42d2>WebGIS开发</a></li><li class="dropdown-item"><!----> <a href="/doc-frontend/solution/" class="nav-link" data-v-e7cf42d2>解决方案</a></li><li class="dropdown-item"><!----> <a href="/doc-frontend/best-practice/" class="nav-link" data-v-e7cf42d2>最佳实践</a></li><li class="dropdown-item"><!----> <a href="/doc-frontend/arithmetic/QuickSort.html" class="nav-link" data-v-e7cf42d2>算法</a></li><li class="dropdown-item"><!----> <a href="/doc-tech3d/other/" class="nav-link" data-v-e7cf42d2>其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">移动</span></a> <ul class="nav-dropdown"><li class="dropdown-item"><!----> <a href="/doc-mobile/start/" class="nav-link" data-v-e7cf42d2>入门手册</a></li><li class="dropdown-item"><!----> <a href="/doc-mobile/dataResource/sourceCodeLib.html" class="nav-link" data-v-e7cf42d2>数据资源</a></li><li class="dropdown-item"><!----> <a href="/doc-mobile/product/nativeApp.html" class="nav-link" data-v-e7cf42d2>产品分型</a></li><li class="dropdown-item"><!----> <a href="/doc-mobile/appStore/" class="nav-link" data-v-e7cf42d2>应用商店</a></li><li class="dropdown-item"><!----> <a href="/doc-mobile/other/designDocument.html" class="nav-link" data-v-e7cf42d2>其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">计算</span></a> <ul class="nav-dropdown"><li class="dropdown-item"><!----> <a href="/doc-calc3d/start/XinShouShouCe.html" class="nav-link" data-v-e7cf42d2>入门手册</a></li><li class="dropdown-item"><!----> <a href="/doc-calc3d/gis/Base_ZBX_ZongJie.html" class="nav-link" data-v-e7cf42d2>GIS</a></li><li class="dropdown-item"><!----> <a href="/doc-calc3d/database/Oracle_LostSysPassword.html" class="nav-link" data-v-e7cf42d2>数据库</a></li><li class="dropdown-item"><!----> <a href="/doc-calc3d/language/" class="nav-link router-link-active" data-v-e7cf42d2>开发语言</a></li><li class="dropdown-item"><!----> <a href="/doc-calc3d/codelab/" class="nav-link" data-v-e7cf42d2>源码库</a></li><li class="dropdown-item"><!----> <a href="/doc-calc3d/production/DDP_ArcGIS_BuShuShouCe.html" class="nav-link" data-v-e7cf42d2>产品</a></li><li class="dropdown-item"><!----> <a href="/doc-calc3d/other/" class="nav-link" data-v-e7cf42d2>其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后台</span></a> <ul class="nav-dropdown"><li class="dropdown-item"><!----> <a href="/doc-backend/start/" class="nav-link" data-v-e7cf42d2>入门手册</a></li><li class="dropdown-item"><!----> <a href="/doc-backend/database/Mongoazyx.html" class="nav-link" data-v-e7cf42d2>数据库</a></li><li class="dropdown-item"><!----> <a href="/doc-backend/framework/Git.html" class="nav-link" data-v-e7cf42d2>开发基础</a></li><li class="dropdown-item"><!----> <a href="/doc-backend/production/" class="nav-link" data-v-e7cf42d2>产品</a></li><li class="dropdown-item"><!----> <a href="/doc-backend/other/" class="nav-link" data-v-e7cf42d2>其他</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">基础研发</span></a> <ul class="nav-dropdown"><li class="dropdown-item"><!----> <a href="/doc-base/dist-utils/API.html" class="nav-link" data-v-e7cf42d2>dist-utils</a></li><li class="dropdown-item"><!----> <a href="http://192.168.200.39:18088/EyeMapAPI/" target="_blank" rel="noopener noreferrer" class="nav-link" data-v-e7cf42d2>eyemap业务库</a></li><li class="dropdown-item"><!----> <a href="/doc-base/stylelint-config/" class="nav-link" data-v-e7cf42d2>stylelint-config</a></li></ul></div></div><div class="nav-item"><a href="/doc-share/SuperMap_Pipe3DStrategy.html" class="nav-link" data-v-e7cf42d2>分享</a></div><div class="nav-item"><a href="https://fellowtravellers.github.io/" target="_blank" rel="noopener noreferrer" class="nav-link" data-v-e7cf42d2>社区</a></div><div class="nav-item"><a href="/doc-help/mdRule.html" class="nav-link" data-v-e7cf42d2>帮助</a></div></nav></div></div> <div class="con-redes-download"><a title="GitLab" href="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/" target="_blank" rel="noopener noreferrer" class="repo-link flaticon-github"></a></div></header> <div class="sidebar-map"><div class="c-sidebar-map"><ul class="sidebar-links-map"><li><div class="sidebar-group first"><ul class="sidebar-group-items"><li><a href="/doc-calc3d/language/" aria-current="page" class="sidebar-link siderbar-map-item">开发语言</a></li></ul></div></li><li><div class="sidebar-group"><ul class="sidebar-group-items"><li><a href="/doc-calc3d/language/CSharp_01_CodeStandard.html" class="sidebar-link siderbar-map-item">C#编程规范</a></li><li><a href="/doc-calc3d/language/CSharp_02_New.html" class="sidebar-link siderbar-map-item">CSharp(1.0-7.0)新特性</a></li><li><a href="/doc-calc3d/language/CSharp_03_YouYaCode.html" class="sidebar-link siderbar-map-item">写出优雅代码(C#)篇</a></li><li><a href="/doc-calc3d/language/CSharp_04_MVVMLight.html" class="sidebar-link siderbar-map-item">MVVMLight</a></li><li><a href="/doc-calc3d/language/CSharp_05_NuGet.html" class="sidebar-link siderbar-map-item">NuGet学习总结</a></li><li><a href="/doc-calc3d/language/CSharp_06_WebApi_Cors.html" class="sidebar-link siderbar-map-item">WebApi 跨域问题解决方案：CORS</a></li><li><a href="/doc-calc3d/language/CSharp_07_WebApi_Exception.html" class="sidebar-link siderbar-map-item">WebApi 异常处理解决方案</a></li><li><a href="/doc-calc3d/language/CSharp_08_WebApi_Params.html" class="sidebar-link siderbar-map-item">WebApi 接口参数详解</a></li><li><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html" aria-current="page" class="active sidebar-link siderbar-map-item">WebApi 接口返回值详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_1、json-t-t-content" class="sidebar-link siderbar-map-item">1、Json\(T content)</a></li><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_2、ok-、-ok-t-t-content" class="sidebar-link siderbar-map-item">2、Ok()、 Ok\(T content)</a></li><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_3、notfound" class="sidebar-link siderbar-map-item">3、NotFound()</a></li><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_4、其他" class="sidebar-link siderbar-map-item">4、其他</a></li><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_5、自定义-ihttpactionresult-接口的实现" class="sidebar-link siderbar-map-item">5、自定义 IHttpActionResult 接口的实现</a></li></ul></li><li><a href="/doc-calc3d/language/CSharp_10_WebApi_Route.html" class="sidebar-link siderbar-map-item">WebApi 路由机制剖析</a></li></ul></div></li><li><div class="sidebar-group"><ul class="sidebar-group-items"><li><a href="/doc-calc3d/language/Java_01_Apache_Maven.html" class="sidebar-link siderbar-map-item">安装 Apache Maven</a></li><li><a href="/doc-calc3d/language/Java_02_Maven_Project.html" class="sidebar-link siderbar-map-item">maven 创建项目及常用命令</a></li><li><a href="/doc-calc3d/language/Java_03_Maven_Life.html" class="sidebar-link siderbar-map-item">maven 生命周期</a></li><li><a href="/doc-calc3d/language/Java_04_Pom.Xml.html" class="sidebar-link siderbar-map-item">常用的 pom.xml 文件解析</a></li><li><a href="/doc-calc3d/language/Java_05_Maven_YiLiai.html" class="sidebar-link siderbar-map-item">maven 依赖管理</a></li><li><a href="/doc-calc3d/language/Java_06_Maven_JICheng.html" class="sidebar-link siderbar-map-item">Maven 聚合与继承</a></li><li><a href="/doc-calc3d/language/Java_07_War.html" class="sidebar-link siderbar-map-item">war 包去掉不必要的 jar 包</a></li></ul></div></li></ul> </div></div> <div class="sidebar"><div class="c-sidebar"> <div class="search-box"><input aria-label="Search" placeholder="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>开发基础</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/doc-calc3d/language/" aria-current="page" class="sidebar-link">开发语言</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>CSharp</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/doc-calc3d/language/CSharp_01_CodeStandard.html" class="sidebar-link">C#编程规范</a></li><li><a href="/doc-calc3d/language/CSharp_02_New.html" class="sidebar-link">CSharp(1.0-7.0)新特性</a></li><li><a href="/doc-calc3d/language/CSharp_03_YouYaCode.html" class="sidebar-link">写出优雅代码(C#)篇</a></li><li><a href="/doc-calc3d/language/CSharp_04_MVVMLight.html" class="sidebar-link">MVVMLight</a></li><li><a href="/doc-calc3d/language/CSharp_05_NuGet.html" class="sidebar-link">NuGet学习总结</a></li><li><a href="/doc-calc3d/language/CSharp_06_WebApi_Cors.html" class="sidebar-link">WebApi 跨域问题解决方案：CORS</a></li><li><a href="/doc-calc3d/language/CSharp_07_WebApi_Exception.html" class="sidebar-link">WebApi 异常处理解决方案</a></li><li><a href="/doc-calc3d/language/CSharp_08_WebApi_Params.html" class="sidebar-link">WebApi 接口参数详解</a></li><li><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html" aria-current="page" class="active sidebar-link">WebApi 接口返回值详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_1、json-t-t-content" class="sidebar-link">1、Json\(T content)</a></li><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_2、ok-、-ok-t-t-content" class="sidebar-link">2、Ok()、 Ok\(T content)</a></li><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_3、notfound" class="sidebar-link">3、NotFound()</a></li><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_4、其他" class="sidebar-link">4、其他</a></li><li class="sidebar-sub-header"><a href="/doc-calc3d/language/CSharp_09_WebApi_Return.html#_5、自定义-ihttpactionresult-接口的实现" class="sidebar-link">5、自定义 IHttpActionResult 接口的实现</a></li></ul></li><li><a href="/doc-calc3d/language/CSharp_10_WebApi_Route.html" class="sidebar-link">WebApi 路由机制剖析</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>JAVA</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/doc-calc3d/language/Java_01_Apache_Maven.html" class="sidebar-link">安装 Apache Maven</a></li><li><a href="/doc-calc3d/language/Java_02_Maven_Project.html" class="sidebar-link">maven 创建项目及常用命令</a></li><li><a href="/doc-calc3d/language/Java_03_Maven_Life.html" class="sidebar-link">maven 生命周期</a></li><li><a href="/doc-calc3d/language/Java_04_Pom.Xml.html" class="sidebar-link">常用的 pom.xml 文件解析</a></li><li><a href="/doc-calc3d/language/Java_05_Maven_YiLiai.html" class="sidebar-link">maven 依赖管理</a></li><li><a href="/doc-calc3d/language/Java_06_Maven_JICheng.html" class="sidebar-link">Maven 聚合与继承</a></li><li><a href="/doc-calc3d/language/Java_07_War.html" class="sidebar-link">war 包去掉不必要的 jar 包</a></li></ul></div></li></ul> </div></div> <!----> <!----> <div class="page"><div class="content-pagex content content__default"><h1 id="webapi-接口返回值详解"><a href="#webapi-接口返回值详解" class="header-anchor">#</a> WebApi 接口返回值详解</h1> <blockquote><p>作者:网络 时间： 2020-10-16</p></blockquote> <p>Webapi 的接口返回值主要有四种类型</p> <ul><li><strong>void 无返回值</strong></li> <li><strong>IHttpActionResult</strong></li> <li><strong>HttpResponseMessage</strong></li> <li><strong>自定义类型</strong></li></ul> <p>此篇就围绕这四块分别来看看它们的使用。</p> <h1 id="一、void-无返回值"><a href="#一、void-无返回值" class="header-anchor">#</a> 一、void 无返回值</h1> <p>void 关键字我们都不陌生，它申明方法没有返回值。它的使用也很简单，我们来看一个示例就能明白。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>　　 <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ORDER</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> ID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NO <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> NAME <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> DESC <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>　　 <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ApiController</span></span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">SaveOrder</span><span class="token punctuation">(</span><span class="token class-name">ORDER</span> name<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//处理业务逻辑</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在 Web 里面调用</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;post&quot;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">&quot;http://localhost:21528/api/Order/SaveOrder&quot;</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token constant">ID</span><span class="token operator">:</span> <span class="token string">&quot;aaa&quot;</span><span class="token punctuation">,</span> <span class="token constant">NAME</span><span class="token operator">:</span> <span class="token string">&quot;test&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>得到结果</p> <p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/8edea01174375c6d125f8791de86e766/459756-20160518100147591-795484497.gif" alt="img"></p> <p>可以看到，使用 void 申明的方法，在 success 方法里面得不到返回值，并且会返回 http 状态码 204，告诉客户端此请求没有返回值。</p> <h1 id="二、ihttpactionresult"><a href="#二、ihttpactionresult" class="header-anchor">#</a> 二、IHttpActionResult</h1> <p>IHttpActionResult 类型是 WebApi 里面非常重要的一种返回值类型。下面博主就根据平时在项目里面使用最多的几种方式来讲解下这种类型的返回值的一些用法。</p> <h2 id="_1、json-t-t-content"><a href="#_1、json-t-t-content" class="header-anchor">#</a> 1、Json&lt;T&gt;(T content)</h2> <p>使用 MVC 开发过的朋友一定记得，在 MVC 里面，请求数据的接口的返回值类型大部分使用的是 JsonResult，在 MVC 里面你一定也写过类似这样的接口：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>　　　　 <span class="token keyword">public</span> <span class="token return-type class-name">JsonResult</span> <span class="token function">GetResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">Json</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> JsonRequestBehavior<span class="token punctuation">.</span>AllowGet<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>那么，在 WebAPI 里面是否也存在类似的用法呢。呵呵，在这点上面，微软总是贴心的。在 WebApi 的 ApiController 这个抽象类里面，为我们封装了 Json&lt;T&gt;(T content)这个方法，它的用法和 MVC 里面的 JsonResult 基本类似。我们通过一个例子来说明它的用法：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>　　　　 <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">GetOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> lstRes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ORDER<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//实际项目中，通过后台取到集合赋值给lstRes变量。这里只是测试。</span>
            lstRes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ORDER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ID <span class="token operator">=</span> <span class="token string">&quot;aaaa&quot;</span><span class="token punctuation">,</span> NO <span class="token operator">=</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> NAME <span class="token operator">=</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> DESC <span class="token operator">=</span> <span class="token string">&quot;1111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            lstRes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ORDER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ID <span class="token operator">=</span> <span class="token string">&quot;bbbb&quot;</span><span class="token punctuation">,</span> NO <span class="token operator">=</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> NAME <span class="token operator">=</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> DESC <span class="token operator">=</span> <span class="token string">&quot;2222&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token generic-method"><span class="token function">Json</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>ORDER<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>lstRes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>看到这个代码，有人就疑惑了，我们定义的返回值类型是 IHttpActionResult 类型，直接返回 Json&lt;T&gt;(T content)这样可行么？我们将 Json 转到定义看看：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token keyword">protected</span> <span class="token keyword">internal</span> <span class="token return-type class-name">JsonResult<span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span> <span class="token generic-method"><span class="token function">Json</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>T<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token class-name">T</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>我们继续将 JsonResult&lt;T&gt;转到定义</p> <p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/76d07a8c66c3a8c443cb91de59645a38/459756-20160518103426185-121461456.png" alt="img"></p> <p>原来 JsonResult&lt;T&gt;是实现了 IHttpActionResult 接口的，难怪可以直接返回呢。</p> <p>知道了这个，我们直接在 Web 里面通过 ajax 请求来调用：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>$<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        type<span class="token punctuation">:</span> '<span class="token keyword">get</span>'<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">url</span><span class="token punctuation">:</span> 'http<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span>localhost<span class="token punctuation">:</span><span class="token number">21528</span><span class="token operator">/</span>api<span class="token operator">/</span>Order<span class="token operator">/</span>GetOrder'<span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">data</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token named-parameter punctuation">success</span><span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">,</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>来看结果：</p> <p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/09e50b7563e2cafad4c09161ca48f45b/459756-20160518104042466-442124827.gif" alt="img"></p> <p>既然实体类可以直接这样传递，那么如果我们想要传递一些匿名类型呢，因为很多情况下，我们需要返回到前端的对象都没有对应的实体来对应，如果我们想要返回匿名对象怎么办呢？我们知道，这里的 Json&lt;T&gt;(T content)必须要传一个对应的泛型类型，如果是匿名类型这里肯定不好传。还好有我们的 object 类型，当然你可以使用 dynamic，我们来试一把。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">GetOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>

            <span class="token keyword">return</span> <span class="token generic-method"><span class="token function">Json</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">dynamic</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token punctuation">{</span> AA <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> BB <span class="token operator">=</span> <span class="token string">&quot;cc&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>同样的来看测试结果：</p> <p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/505f0de4a4ae4b7866f8bb9408e2d2e8/459756-20160518105037904-1250637926.gif" alt="img"></p> <h2 id="_2、ok-、-ok-t-t-content"><a href="#_2、ok-、-ok-t-t-content" class="header-anchor">#</a> 2、Ok()、 Ok&lt;T&gt;(T content)</h2> <p>除了 Json&lt;T&gt;(T content)，在 ApiController 里面还有另外一个比较常用的方法：Ok()。同样，我们将 Ok()转到定义</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">protected</span> <span class="token keyword">internal</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">OkResult</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>OkResult 转到定义</p> <p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/c5a01d80348cd00773a2562abb2ae809/459756-20160518105439482-1200647799.png" alt="img"></p> <p>有了这个作为基础，我们就可以放心大胆的使用了。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">GetOKResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>得到结果
<img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/d9409ee4ab682f1794e978d0cf2cdfc4/459756-20160518110253138-1272090042.gif" alt="img"></p> <p>如果返回 Ok()，就表示不向客户端返回任何信息，只告诉客户端请求成功。</p> <p>除了 Ok()之外，还有另外一个重载 Ok&lt;T&gt;(T content)。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">GetOKResult</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> name<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token generic-method"><span class="token function">Ok</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/09918256b66142983d2cb3b7358ab155/459756-20160518110700826-1856827071.gif" alt="img"></p> <p>这种用法和 Json&lt;T&gt;(T content)比较类似，如果你非要问这两者有什么区别，或者说怎么选择两者。那么我的理解是如果是返回实体或者实体集合，建议使用 Json&lt;T&gt;(T content)，如果是返回基础类型（如 int、string 等），使用 Ok&lt;T&gt;(T content)。</p> <h2 id="_3、notfound"><a href="#_3、notfound" class="header-anchor">#</a> 3、NotFound()</h2> <p>当需要向客户端返回找不到记录时，有时需要用到 NotFound()方法。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">protected</span> <span class="token keyword">internal</span> <span class="token keyword">virtual</span> <span class="token return-type class-name">NotFoundResult</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/b565e4feb014d5c4011a346297413fac/459756-20160518112243857-1739933700.png" alt="img"></p> <p>来看看它的使用场景</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">GetNotFoundResult</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> id<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> lstRes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ORDER<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//实际项目中，通过后台取到集合赋值给lstRes变量。这里只是测试。</span>
            lstRes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ORDER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ID <span class="token operator">=</span> <span class="token string">&quot;aaaa&quot;</span><span class="token punctuation">,</span> NO <span class="token operator">=</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> NAME <span class="token operator">=</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> DESC <span class="token operator">=</span> <span class="token string">&quot;1111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            lstRes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ORDER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ID <span class="token operator">=</span> <span class="token string">&quot;bbbb&quot;</span><span class="token punctuation">,</span> NO <span class="token operator">=</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> NAME <span class="token operator">=</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> DESC <span class="token operator">=</span> <span class="token string">&quot;2222&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> oFind <span class="token operator">=</span> lstRes<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>ID <span class="token operator">==</span> id<span class="token punctuation">)</span> <span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>oFind <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token function">NotFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">else</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token generic-method"><span class="token function">Json</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ORDER<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>oFind<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">&quot;http://localhost:21528/api/Order/GetNotFoundResult&quot;</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&quot;cccc&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>得到结果</p> <p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/8eeb4e3a779d5f1f3e3b8d6340271c22/459756-20160518112939498-1854926524.gif" alt="img"></p> <p>NotFound()方法会返回一个 404 的错误到客户端。</p> <h2 id="_4、其他"><a href="#_4、其他" class="header-anchor">#</a> 4、其他</h2> <p>其他还有一些方法，都有它特定的用途。在此贴出来。</p> <h3 id="_4-1、content-t-httpstatuscode-statuscode-t-value"><a href="#_4-1、content-t-httpstatuscode-statuscode-t-value" class="header-anchor">#</a> 4.1、Content&lt;T&gt;(HttpStatusCode statusCode, T value)</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">GetContentResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token generic-method"><span class="token function">Content</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> <span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>向客户端返回值和 http 状态码。</p> <h3 id="_4-2、badrequest"><a href="#_4-2、badrequest" class="header-anchor">#</a> 4.2、BadRequest()</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">GetBadRequest</span><span class="token punctuation">(</span><span class="token class-name">ORDER</span> order<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span>ID<span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token keyword">return</span> <span class="token function">BadRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">Ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>向客户端返回 400 的 http 错误。</p> <h3 id="_4-3、redirect-string-location"><a href="#_4-3、redirect-string-location" class="header-anchor">#</a> 4.3、Redirect(string location)</h3> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">RedirectResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">Redirect</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:21528/api/Order/GetContentResult&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>将请求重定向到其他地方。</p> <h2 id="_5、自定义-ihttpactionresult-接口的实现"><a href="#_5、自定义-ihttpactionresult-接口的实现" class="header-anchor">#</a> 5、自定义 IHttpActionResult 接口的实现</h2> <p>上面介绍了一些系统内置的常用的实现 IHttpActionResult 接口的方法。如果我们需要自定义 IHttpActionResult 的返回呢？</p> <p>在介绍之前，我们有必要先来看看 IHttpActionResult 类型的定义，将 IHttpActionResult 转到定义可以看到：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code><span class="token keyword">namespace</span> <span class="token namespace">System<span class="token punctuation">.</span>Web<span class="token punctuation">.</span>Http</span>
<span class="token punctuation">{</span>
    <span class="token comment">// 摘要:</span>
    <span class="token comment">//     Defines a command that asynchronously creates an System.Net.Http.HttpResponseMessage.</span>
    <span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IHttpActionResult</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// 摘要:</span>
        <span class="token comment">//     Creates an System.Net.Http.HttpResponseMessage asynchronously.</span>
        <span class="token comment">//</span>
        <span class="token comment">// 参数:</span>
        <span class="token comment">//   cancellationToken:</span>
        <span class="token comment">//     The token to monitor for cancellation requests.</span>
        <span class="token comment">//</span>
        <span class="token comment">// 返回结果:</span>
        <span class="token comment">//     A task that, when completed, contains the System.Net.Http.HttpResponseMessage.</span>
        <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>System<span class="token punctuation">.</span>Net<span class="token punctuation">.</span>Http<span class="token punctuation">.</span>HttpResponseMessage<span class="token punctuation">&gt;</span></span> <span class="token function">ExecuteAsync</span><span class="token punctuation">(</span><span class="token class-name">CancellationToken</span> cancellationToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>这个接口包含唯一的一个方法 ExecuteAsync()，此方法将以异步方式创建一个<strong>HttpResponseMessage</strong>实例返回给客户端。</p> <p>有了这个作为基础，下面，我们自定义一个 bootstrapTable 服务端分页的子类去展示自定义 IHttpActionResult 的用法。</p> <p>首先，自定义一个实现类</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code> 　　<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PageResult</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IHttpActionResult</span></span>
    <span class="token punctuation">{</span>
        <span class="token class-name"><span class="token keyword">object</span></span> _value<span class="token punctuation">;</span>
        <span class="token class-name">HttpRequestMessage</span> _request<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">PageResult</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">,</span> <span class="token class-name">HttpRequestMessage</span> request<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            _value <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span>
            _request <span class="token operator">=</span> request<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>HttpResponseMessage<span class="token punctuation">&gt;</span></span> <span class="token function">ExecuteAsync</span><span class="token punctuation">(</span><span class="token class-name">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>CancellationToken</span> cancellationToken<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> response <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpResponseMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                Content <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ObjectContent</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name"><span class="token keyword">object</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> _value<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JsonMediaTypeFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                RequestMessage <span class="token operator">=</span> _request
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> Task<span class="token punctuation">.</span><span class="token function">FromResult</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>然后，在 API 接口里面返回 PageResult 对象</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code> 　　　　<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">IHttpActionResult</span> <span class="token function">GetPageRow</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> limit<span class="token punctuation">,</span> <span class="token class-name"><span class="token keyword">int</span></span> offset<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> lstRes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ORDER<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//实际项目中，通过后台取到集合赋值给lstRes变量。这里只是测试。</span>
            lstRes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ORDER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ID <span class="token operator">=</span> <span class="token string">&quot;aaaa&quot;</span><span class="token punctuation">,</span> NO <span class="token operator">=</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> NAME <span class="token operator">=</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> DESC <span class="token operator">=</span> <span class="token string">&quot;1111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            lstRes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ORDER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ID <span class="token operator">=</span> <span class="token string">&quot;bbbb&quot;</span><span class="token punctuation">,</span> NO <span class="token operator">=</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> NAME <span class="token operator">=</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> DESC <span class="token operator">=</span> <span class="token string">&quot;2222&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name"><span class="token keyword">var</span></span> oData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token punctuation">{</span> total <span class="token operator">=</span> lstRes<span class="token punctuation">.</span>Count<span class="token punctuation">,</span> rows <span class="token operator">=</span> lstRes<span class="token punctuation">.</span><span class="token function">Skip</span><span class="token punctuation">(</span>offset<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Take</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ToList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PageResult</span><span class="token punctuation">(</span>oData<span class="token punctuation">,</span> Request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>最好，ajax 调用</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">&quot;http://localhost:21528/api/Order/GetPageRow&quot;</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token punctuation">{</span> limit<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> offset<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>得到结果</p> <p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/e44a326c6f8db781ae857f783dc67c4e/459756-20160518122253404-1021235553.gif" alt="img"></p> <h1 id="三、httpresponsemessage"><a href="#三、httpresponsemessage" class="header-anchor">#</a> 三、<strong>HttpResponseMessage</strong></h1> <p>在上文自定义 IHttpActionResult 返回类型的时候，提到过 HttpResponseMessage 这个对象。它表示向客户端返回一个 http 响应的消息对象（包含 http 状态码和需要返回客户端的消息）。这个对象也有它独特的使用场景：需要向客户端返回 HttpResponse 时就要用到这个对象。以导出为例，由于需要将导出的 Excel 文件输出到客户端浏览器，Webapi 的服务端需要向 Web 的客户端输出文件流，这个时候一般的 IHttpActionResult 对象不方便解决这个问题，于是 HttpReponseMessage 派上了用场。我们来看看它的使用示例。</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>　　　　<span class="token keyword">public</span> <span class="token return-type class-name">HttpResponseMessage</span> <span class="token function">Export</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">//取数据</span>
            <span class="token class-name"><span class="token keyword">var</span></span> lstRes <span class="token operator">=</span> OrderBLL<span class="token punctuation">.</span><span class="token function">Export</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//向Excel里面填充数据</span>
            <span class="token class-name">HSSFWorkbook</span> workbook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HSSFWorkbook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">CreateAndFillSheet</span><span class="token punctuation">(</span>workbook<span class="token punctuation">,</span> lstRes<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//保存到服务</span>
            <span class="token class-name"><span class="token keyword">var</span></span> fileName <span class="token operator">=</span> <span class="token string">&quot;Excel&quot;</span> <span class="token operator">+</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token string">&quot;yyyyMMddHHmmss&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.xls&quot;</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> strPath <span class="token operator">=</span> Path<span class="token punctuation">.</span><span class="token function">Combine</span><span class="token punctuation">(</span>AppDomain<span class="token punctuation">.</span>CurrentDomain<span class="token punctuation">.</span>BaseDirectory<span class="token punctuation">,</span> <span class="token string">@&quot;Data\&quot; + fileName);
            using (FileStream fs = new FileStream(strPath, FileMode.Create))
            {
                workbook.Write(fs);
                using (MemoryStream ms = new MemoryStream())
                {
                    workbook.Write(ms);
                }
            }

            //输出到浏览器
            try
            {
                var stream = new FileStream(strPath, FileMode.Open);
                HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.OK);
                response.Content = new StreamContent(stream);
                response.Content.Headers.ContentType = new MediaTypeHeaderValue(&quot;</span>application<span class="token operator">/</span>octet<span class="token operator">-</span>stream&quot;<span class="token punctuation">)</span><span class="token punctuation">;</span>
                response<span class="token punctuation">.</span>Content<span class="token punctuation">.</span>Headers<span class="token punctuation">.</span>ContentDisposition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">ContentDispositionHeaderValue</span><span class="token punctuation">(</span><span class="token string">&quot;attachment&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    FileName <span class="token operator">=</span> fileName
                <span class="token punctuation">}</span><span class="token punctuation">;</span>

                <span class="token keyword">return</span> response<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">catch</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpResponseMessage</span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>NoContent<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>将文件流保存在 StreamContent 对象里面，然后输出到浏览器。在浏览器端即可将 Excel 输出。</p> <h1 id="四、自定义类型"><a href="#四、自定义类型" class="header-anchor">#</a> 四、自定义类型</h1> <p>以上几种返回值类型能解决我们大部分返回值的问题，当然，你也可以将 webapi 的接口和普通方法一样，返回任意的类型，<strong>WebApi 会自动序列化你自定义任何返回类型，然后将序列化的值写到响应正文里，状态码统一返回 200</strong>。比如：</p> <div class="language-csharp line-numbers-mode"><pre class="language-csharp"><code>        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">object</span></span> <span class="token function">GetOther</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> lstRes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span>ORDER<span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//实际项目中，通过后台取到集合赋值给lstRes变量。这里只是测试。</span>
            lstRes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ORDER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ID <span class="token operator">=</span> <span class="token string">&quot;aaaa&quot;</span><span class="token punctuation">,</span> NO <span class="token operator">=</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> NAME <span class="token operator">=</span> <span class="token string">&quot;111&quot;</span><span class="token punctuation">,</span> DESC <span class="token operator">=</span> <span class="token string">&quot;1111&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            lstRes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">ORDER</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> ID <span class="token operator">=</span> <span class="token string">&quot;bbbb&quot;</span><span class="token punctuation">,</span> NO <span class="token operator">=</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> NAME <span class="token operator">=</span> <span class="token string">&quot;222&quot;</span><span class="token punctuation">,</span> DESC <span class="token operator">=</span> <span class="token string">&quot;2222&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> lstRes<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>得到结果</p> <p><img src="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/b2bc4e63217827706dc513d96de40a0a/459756-20160518144158529-2136726568.gif" alt="img"></p> <p>和上面的 Json、Ok 等用法在效果上面没有太大区别。</p> <h1 id="五、总结"><a href="#五、总结" class="header-anchor">#</a> 五、总结</h1> <p>以上通过四个方面详细分享了下 WebApi 里面返回值的常见用法，不能说哪种方式最好，因为每种方式都有其特定的使用场景。<strong>博主觉得为了规范 WebApi 接口，对于一般接口的返回值，尽量使用 IHttpActionResult 类型作为返回值，毕竟是微软内置的东西，可能为我们考虑了很多我们考虑不到的东西</strong>。当然，你可能会觉得麻烦，你可能会说直接和普通方法一样来使用不是更爽，博主当初也有这种想法，可是学习微软的东西多了之后发现很多东西还是遵守一定的标准比较好，至少维护起来方便。这就像博主最近正在努力学习的 WebApi+oData 一样，为什么要搞这么一套标准性的东西，还不是为了更加方便地规范 Restful 风格。如果本文能帮到你，不妨<strong>推荐</strong>下，您的推荐是博主继续总结的动力！</p></div> <div class="content edit-link"><a href="http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/edit/master/docs/doc-calc3d/language/CSharp_09_WebApi_Return.md" target="_blank" rel="noopener noreferrer">
      编辑此页面
    </a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="content page-nav"><p class="inner"><span class="prev"><a href="/doc-calc3d/language/CSharp_08_WebApi_Params.html" class="prev">&lt; WebApi 接口参数详解</a></span> <span class="next"><a href="/doc-calc3d/language/CSharp_10_WebApi_Route.html">
          WebApi 路由机制剖析
          &gt;
        </a></span></p></div> <div class="footer">数据中心 研发二部</div></div></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.16cdc938.js" defer></script><script src="/assets/js/3.4f14b16d.js" defer></script><script src="/assets/js/1.02cf7ae9.js" defer></script><script src="/assets/js/94.ebd37258.js" defer></script>
  </body>
</html>
