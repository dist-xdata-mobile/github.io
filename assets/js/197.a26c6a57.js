(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{585:function(e,a,t){"use strict";t.r(a);var r=t(6),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"vue-和-supermap-iclient3d-for-webgl-注意事项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#vue-和-supermap-iclient3d-for-webgl-注意事项"}},[e._v("#")]),e._v(" Vue 和 SuperMap iClient3D for WebGL 注意事项")]),e._v(" "),t("blockquote",[t("p",[e._v("源自 SuperMap by lauxb")])]),e._v(" "),t("h2",{attrs:{id:"前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),t("p",[e._v("最近接触到较多基于 vue 框架+SuperMap_iClient3D_for_WebGL 产品做三维应用开发的项目，反馈较多的是性能卡顿、帧率低。经过排查，发现普遍存在以下问题，现总结出相关问题的解决办法，仅供参考。")]),e._v(" "),t("h2",{attrs:{id:"问题一"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题一"}},[e._v("#")]),e._v(" 问题一")]),e._v(" "),t("p",[t("code",[e._v("问题描述：误将 Cesium 的对象 viewer 放入到 store、data、computed 中。")])]),e._v(" "),t("p",[e._v("如果把 Cesium 的对象 viewer 放入到 store、data、computed 中，会引起 Cesium 帧率严重下降的问题。由于 vue 响应式框架对页面数据渲染是很友好，data 选项会把数据里面所有的属性都转换成 get,set 进行监听。但是对于 Cesium 庞大的对象直接挂载到 vue 的 data 对象上会影响整个页面的渲染效率，降低帧率就，特别是加载大体量模型场景时。")]),e._v(" "),t("p",[e._v("错误示范用例：")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/a7dd94c90f035d5a49d793b8d6de1ef5/image-20201124131741059.png",alt:"image-20201124131741059"}})]),e._v(" "),t("p",[t("code",[e._v("正确做法是将 viewer 对象作为 window 的全局对象，避免 vue 劫持 viewer，同时方便在其他组件中调用。")])]),e._v(" "),t("p",[e._v("正确范例图：")]),e._v(" "),t("p",[t("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/12dd8597eda195c0f51a134024cdfeaa/image-20201124131922356.png",alt:"image-20201124131922356"}})]),e._v(" "),t("h2",{attrs:{id:"问题二"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题二"}},[e._v("#")]),e._v(" 问题二")]),e._v(" "),t("p",[t("code",[e._v("问题描述：Cesium 下的所有对象都不建议放入到 store、data、computed 中。")]),e._v("\n除了 viewer 对象，Cesium 下的所有对象都不建议放入到 store、data、computed 中，比如 handler 编辑事件。")]),e._v(" "),t("p",[e._v("错误示范用例：\n"),t("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/cd7e40424dde19c0ddeee10e7eef311b/image-20201124132304225.png",alt:"image-20201124132304225"}})]),e._v(" "),t("p",[e._v("正确做法是将 handler 编辑事件，定义在 data 外部。")]),e._v(" "),t("p",[e._v("正确示范用例：\n"),t("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/f4660e8d6205cc1ae216c2df1295780a/image-20201124132411649.png",alt:"image-20201124132411649"}})]),e._v(" "),t("h2",{attrs:{id:"问题三"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题三"}},[e._v("#")]),e._v(" 问题三")]),e._v(" "),t("p",[t("code",[e._v("分析功能等对象，用完之后要销毁对象。")]),e._v(" "),t("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/fellow-travellers/picgorepo/uploads/17e94faee54e5f23372459d8a4c0125a/image-20201124132721003.png",alt:"image-20201124132721003"}})])])}),[],!1,null,null,null);a.default=s.exports}}]);