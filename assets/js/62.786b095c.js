(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{453:function(s,a,e){"use strict";e.r(a);var n=e(6),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"mongo-安装运行（linux-windows-docker）"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mongo-安装运行（linux-windows-docker）"}},[s._v("#")]),s._v(" Mongo 安装运行（linux,windows,docker）")]),s._v(" "),e("p",[s._v("[TOC]")]),s._v(" "),e("h2",{attrs:{id:"linux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#linux"}},[s._v("#")]),s._v(" Linux")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("通过 WGET 下载 Linux 版本的 MongoDB(官网：https://www.mongodb.com/download-center/community)")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-4.0.12.tgz\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("解压并重命名压缩包")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxvf mongodb-linux-x86_64-rhel62-3.4.3.tgz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" mongodb-linux-x86_64-rhel62-3.4.3.tgz mongodb\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("在安装目录下创建 data 文件夹用于存放数据和日志")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("cd mongodb\nmkdir data\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("在 data 文件夹下创建 db 文件夹用于存放数据，")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mkdir data/db\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("创建 logs 文件夹存放日志信息，并创建日志文件 mongodb.log")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" data/logs\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" data/logs/mongodb.log\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("在 data 文件夹下创建 mongodb.conf 配置文件，并添加日志信息")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" data/mongodb.conf\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" data/mongodb.conf\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口号port = 27017")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#数据目录")]),s._v("\ndbpath "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /home/xiaohao/mongo/mongodb/data/db\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志目录")]),s._v("\nlogpath "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /home/xiaohao/mongo/mongodb/data/logs/mongodb.log\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#设置后台运行")]),s._v("\nfork "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志输出方式")]),s._v("\nlogappend "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#开启认证")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#auth = true")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Listen to all ip address允许外部机器连接")]),s._v("\nbind_ip "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("启动服务")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" bin/mongod -config data/mongodb.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("访问服务器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("bin/mongo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("停止服务器")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo bin/mongod -shutdown -config data/mongodb.conf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])]),s._v(" "),e("h2",{attrs:{id:"windows"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[s._v("#")]),s._v(" windows")]),s._v(" "),e("h3",{attrs:{id:"zip"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#zip"}},[s._v("#")]),s._v(" zip")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("下载安装到比如 D 盘，D:\\mongodb,")])]),s._v(" "),e("li",[e("p",[s._v("创建数据库目录和日志目录：D:\\mongodb\\data，D:\\mongodb\\logs")])]),s._v(" "),e("li",[e("p",[s._v('打开 cmd 命令行窗口，切换到 D:\\mongodb\\bin 目录执行如下命令(其中 --dbpath 是指定数据库存放目录，这里要注意有两个 "-"):')]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mongod --dbpath D:\\MongoDB\\data\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("这时命令行窗口会打印一些启动信息，最后一行显示为如下信息时表示启动成功了.")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("2014-04-23T10:38:48.391+0800 [initandlisten] waiting for connections on port 27017\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这时在浏览器输入"),e("a",{attrs:{href:"http://localhost:27017/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://localhost:27017/"),e("OutboundLink")],1),s._v("可以看到显示信息为:It looks like .....")])]),s._v(" "),e("li",[e("p",[s._v("接下来需要将 Mongo 加到 windows 本地服务中去：打开 cmd 命令行窗口，切换到 D:\\mongodb\\bin 目录执行如下命令：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("mongod.exe --logpath D:\\mongodb\\logs\\mongodb.log --logappend --dbpath D:\\mongodb\\data --directoryperdb --serviceName MongoDB --install\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("服务创建完成之后默认是停止状态，右键我的电脑找到管理，找到 Mongodb 服务，手动打开，（如果无法启动，删除 data 目录中的 mongod.lock storage.bson 两个文件即可）")])]),s._v(" "),e("li",[e("p",[s._v("现在就可以去 bin 目录下运行 mongo.exe 了，可以进行运算测试")])])]),s._v(" "),e("h3",{attrs:{id:"msi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#msi"}},[s._v("#")]),s._v(" MSI")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("一步一步点点点，设置好数据库目录，日志目录，安装目录。")])]),s._v(" "),e("li",[e("p",[s._v("桌面安装时启动 Mongo 服务时出现问题")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("错误1053:服务没有及时响应启动或控制请求MongoDB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("p",[s._v("在安装目录下编写配置文件 mongodb.conf")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dbpath")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("E:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Mongo4.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("data "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#数据库路径")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("logpath")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("E:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Mongo4.0"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("log"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("mongodb.log "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#日志输出文件路径")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("logappend")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#错误日志采用追加模式，配置这个选项后mongodb的日志会追加到现有的日志文件，而不是从新创建一个新文件")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("journal")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启用日志文件，默认启用")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("quiet")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#这个选项可以过滤掉一些无用的日志信息，若需要调试使用请设置为false")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("port")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("27017")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#端口号 默认为27017")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("删除自带的 mongodb 服务")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("sc delete MongoDB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("创建新的 mongodb 服务：")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("sc create MongoDB "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("binPath")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"E:\\Mongo4.0'),e("span",{pre:!0,attrs:{class:"token entity",title:"\\b"}},[s._v("\\b")]),s._v('in\\mongod.exe --service --config=E:\\Mongo4.0\\mongod.cfg"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[s._v("注意相关路径")])])]),s._v(" "),e("li",[e("p",[s._v("启动服务")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("net start mongodb\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])])])]),s._v(" "),e("h2",{attrs:{id:"docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[s._v("#")]),s._v(" docker")]),s._v(" "),e("ul",[e("li",[e("p",[s._v("下载 MongoDB 的官方 docker 镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker pull mongo:4\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("查看下载的镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("启动一个 MongoDB 服务器容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run --name mymongo -v /mymongo/data:/data/db -d mongo:4\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##以后可以直接启动mymongo容器")]),s._v("\ndocker start mymongo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("查看 docker 容器状态")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("查看数据库服务器日志")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker logs mymongo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"mongo-express"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mongo-express"}},[s._v("#")]),s._v(" Mongo Express")]),s._v(" "),e("blockquote",[e("p",[s._v("是一个基于网络的 MongoDB 数据库管理界面")])]),s._v(" "),e("ul",[e("li",[e("p",[s._v("下载 mongo-express 镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker pull mongo-express\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("运行 mongo-express")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker run --link mymongo:mongo -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8081")]),s._v(":8081 mongo-express\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("访问数据库")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("localhost:8081\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"mongo-shell"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mongo-shell"}},[s._v("#")]),s._v(" mongo shell")]),s._v(" "),e("blockquote",[e("p",[s._v("mongo shell 是用来操作 MongoDB 的 JavaScript 客户端界面")])]),s._v(" "),e("ul",[e("li",[e("p",[s._v("运行 mongo shell")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it mymongo mongo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("支持 JavaScript 语法")])])])])}),[],!1,null,null,null);a.default=t.exports}}]);