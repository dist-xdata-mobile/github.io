(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{447:function(t,s,a){"use strict";a.r(s);var e=a(6),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"xtils-建设指南"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xtils-建设指南"}},[t._v("#")]),t._v(" Xtils 建设指南")]),t._v(" "),a("blockquote",[a("p",[t._v("作者: 谭辉")])]),t._v(" "),a("h2",{attrs:{id:"仓库地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#仓库地址"}},[t._v("#")]),t._v(" 仓库地址")]),t._v(" "),a("p",[t._v("仓库："),a("a",{attrs:{href:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/xdata/xdata-FE/component-library/dist-base",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335/xdata/xdata-FE/component-library/dist-base"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("目前"),a("strong",[t._v("Xtils")]),t._v("作为公司基础研发库的一个 package 进行管理，并没有独立的仓库。")]),t._v(" "),a("p",[t._v("在仓库目录中，"),a("code",[t._v("packages/utils")]),t._v("即为"),a("strong",[t._v("Xtils")]),t._v("源码目录。")]),t._v(" "),a("p",[t._v("需要为"),a("strong",[t._v("Xtils")]),t._v("贡献代码时，请以仓库 dev 分支中"),a("code",[t._v("packages/utils")]),t._v("目录作为最新源码，进而再此基础上贡献代码。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/09/08/Cj9WwBymvJLYTfd.png",alt:"image-20230823105208091"}})]),t._v(" "),a("h2",{attrs:{id:"xtils-源码结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xtils-源码结构"}},[t._v("#")]),t._v(" Xtils 源码结构")]),t._v(" "),a("h3",{attrs:{id:"目录结构说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构说明"}},[t._v("#")]),t._v(" 目录结构说明")]),t._v(" "),a("p",[t._v("在"),a("strong",[t._v("Xtils")]),t._v("中，"),a("code",[t._v("src")]),t._v("目录下存放各类函数，"),a("code",[t._v("tests")]),t._v("目录下存放函数的单元测试用例")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/09/08/vbXojt2cWsVmnL6.png",alt:"image-20230823105651939"}})]),t._v(" "),a("h3",{attrs:{id:"函数编写说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#函数编写说明"}},[t._v("#")]),t._v(" 函数编写说明")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("Xtils")]),t._v("中的功能函数以"),a("code",[t._v("javascript")]),t._v("编写，且需要为每个函数单独提供"),a("strong",[t._v("TS 类型声明文件")]),t._v("，TS 声明文件需放在 JS 功能函数同一目录下，TS 声明文件名需与 JS 函数文件名一致，如图所示：")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/09/08/6B8Wk7eC2JZxSUo.png",alt:"image-20230823110141146"}})]),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[t._v("函数分类")]),t._v(" "),a("p",[t._v("现目前"),a("strong",[t._v("Xtils")]),t._v("共有以下几大类函数，分类规则为：以函数处理的数据类型作为划分")]),t._v(" "),a("ol",[a("li",[t._v("array - 处理数组类型数据")]),t._v(" "),a("li",[t._v("assert - 对数据类型的判断类的函数")]),t._v(" "),a("li",[t._v("browser - 浏览器 API 的增加")]),t._v(" "),a("li",[t._v("deprecated - 不推荐使用的函数，由于历史原因，一些老旧函数不推荐使用，放置此目录下")]),t._v(" "),a("li",[t._v("download - 文件下载类函数")]),t._v(" "),a("li",[t._v("env - 获取、设置环境变量类函数")]),t._v(" "),a("li",[t._v("number - 处理数字类型的函数")]),t._v(" "),a("li",[t._v("object - 处理对象类型的函数")]),t._v(" "),a("li",[t._v("url - 处理 url 的函数")]),t._v(" "),a("li",[t._v("shared - 不对外开放的函数，内部函数之间可能需要用到的共用的逻辑处理函数，放置在此类")]),t._v(" "),a("li",[t._v("others - 不属于以上类别的函数暂放此目录中")])])]),t._v(" "),a("li",[a("p",[t._v("函数导出")]),t._v(" "),a("p",[t._v("每一个功能函数皆以默认导出形式进行导出，即：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("example")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("新增的功能函数除了在本身"),a("code",[t._v("JS")]),t._v("文件中使用默认导出，同时还需要在"),a("code",[t._v("src/index")]),t._v("下添加一个导出接口。如下图所示：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/09/08/PSrY1ijGAg39WuN.png",alt:"image-20230823113102968"}})]),t._v(" "),a("p",[t._v("注意：为了实现函数库按需加载，"),a("strong",[t._v("具名函数导出的名称需与 JS 文件名一致")]),t._v("，且文件名须为小驼峰命名规则")]),t._v(" "),a("p",[t._v("注意：由于 xtils 作为产品研发大仓库的一部分，仓库采用的"),a("code",[t._v("monorepo")]),t._v("方式进行管理，如果在贡献函数功能时需要安装外部依赖库，请安装在 utils 这个 package 下，但由于 xtils 本身作为一个轻量函数库，请尽量减少对第三方库的依赖：")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("pnpm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" xxx -F utils\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])]),t._v(" "),a("h3",{attrs:{id:"单元测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#单元测试"}},[t._v("#")]),t._v(" 单元测试")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("单元测试所用框架为"),a("code",[t._v("jest")])])]),t._v(" "),a("li",[a("p",[t._v("如果新增功能函数，必须为函数编写单元测试文件，要有足够的覆盖度。如果修改功能函数，也要修改对应的测试用例添加覆盖单元。")])]),t._v(" "),a("li",[a("p",[t._v("单元测试文件中导入的函数需从"),a("code",[t._v("src/index.js")]),t._v("文件中导入，而不是从函数文件所在位置导出，如下：")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// converUnit.test.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" convertUnit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../src'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])])])]),t._v(" "),a("h2",{attrs:{id:"提交-pr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提交-pr"}},[t._v("#")]),t._v(" 提交 PR")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("在 gitlab 仓库中提交 MergeRequest, 目标分支选择 Dev 分支")])]),t._v(" "),a("li",[a("p",[t._v("在 MR 的信息填写相关信息")]),t._v(" "),a("p",[t._v("如果是为 xtils 新增函数：")]),t._v(" "),a("ol",[a("li",[t._v("title 请填写： 新增 xxx 函数")]),t._v(" "),a("li",[t._v("description 请填写函数应用场景")])]),t._v(" "),a("p",[t._v("如果是为 xtils 修复 bug 或者增强函数：")]),t._v(" "),a("ol",[a("li",[t._v("title 请填写：修复 xxx 函数 xxx 问题 或 [xxx 函数]： 支持 xxx 功能")]),t._v(" "),a("li",[t._v("description 请填写修复问题的详情或增加的函数功能详情")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://s2.loli.net/2023/09/08/R4rQVtFeYbxy8Cc.png",alt:"image-20230908153334235"}})])])])])}),[],!1,null,null,null);s.default=n.exports}}]);