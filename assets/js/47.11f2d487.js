(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{437:function(t,a,s){"use strict";s.r(a);var e=s(6),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"辅助审查系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#辅助审查系统"}},[t._v("#")]),t._v(" 辅助审查系统")]),t._v(" "),s("blockquote",[s("p",[t._v("作者：于佳鑫")])]),t._v(" "),s("p",[t._v("国土基线地址：http://52.83.103.252:8086/NatureResource/#/Portal")]),t._v(" "),s("p",[t._v("用户名/ 密码：*** / ***")]),t._v(" "),s("p",[t._v("运维地址：http://52.83.103.252:8086/dgpoms/#/pc/roleperm/domain")]),t._v(" "),s("p",[t._v("用户名/密码：*** / ***")]),t._v(" "),s("p",[t._v("业务库地址：*** / ***")]),t._v(" "),s("h2",{attrs:{id:"依赖的支撑系统"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#依赖的支撑系统"}},[t._v("#")]),t._v(" 依赖的支撑系统")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/a865c4fffed3726272f4f7eafee373d9/image-20200915153917206.png",alt:"image-20200915153917206"}}),t._v(" "),s("h2",{attrs:{id:"核心模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心模块"}},[t._v("#")]),t._v(" 核心模块")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/59efcfc229465567c2b56e16989d6423/image-20200915132956440.png",alt:"核心模块"}}),t._v(" "),s("h2",{attrs:{id:"一、成果审查模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、成果审查模块"}},[t._v("#")]),t._v(" 一、成果审查模块")]),t._v(" "),s("p",[t._v("先看下整个系统使用到的表和他们之间的关系吧，下面介绍的时候会提及到：")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/e9d39971ccbe9f303ea99b06bc42f485/image-20200915142252299.png",alt:"数据库设计"}}),t._v(" "),s("p",[t._v("整个系统的核心是审查任务表，审查任务表中有一个核心的概念就是”五级三类“，“五级”为：国家级、省级、市级、县级、乡镇级，“三类”为：总规、控规、专规。审查任务的区域级别在数据库中采用 areaLevel 字段表示，规划类型采用 planType 表示。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/58c862c54c9e529ea0aebda64e28b253/image-20200915150106502.png",alt:"image-20200915150106502"}}),t._v(" "),s("h3",{attrs:{id:"_1-1-下面我们一起走下整个审查系统的流程吧："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-下面我们一起走下整个审查系统的流程吧："}},[t._v("#")]),t._v(" 1.1 下面我们一起走下整个审查系统的流程吧：")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/2bc6e90219ff6eba22a0d1f5613a4624/image-20200915151214160.png",alt:"image-20200915151214160"}}),t._v(" "),s("p",[t._v("当点击新建任务的时候，会弹出选择成果包的对话框，选择对应的成果包进行上传即可。")]),t._v(" "),s("blockquote",[s("p",[t._v("注：此处上传成果包时的要求")]),t._v(" "),s("ol",[s("li",[t._v("此处上传的成果包是报批成果包（需要被审查的成果包）")])]),t._v(" "),s("p",[t._v("报批成果包：链接: https://pan.baidu.com/s/1tL6BKvMMB8yhaM0Qf6s78g 密码: 6drb")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("仅能上传本级或下级行政区划的成果包。")])]),t._v(" "),s("p",[t._v("那么怎样确定用户所属级别呢？")]),t._v(" "),s("p",[t._v("进入运维：")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/5dfd2e39fbde17f907a4d3a2afd07173/image-20200916094838953.png",alt:"image-20200916094838953"}}),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/0e71ee36df252230e9866f77baf9d0a6/image-20200916094925041.png",alt:"image-20200916094925041"}})]),t._v(" "),s("p",[t._v("我们解压下成果包看下其中的“成果数据基本信息.txt”文件，其中规划类型和区域级别两个字段的来源已经在图上标注出来了。")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/2509b44f5fa38cdde16c5da3716855b4/image-20200915153100442.png",alt:"image-20200915153100442"}}),t._v(" "),s("p",[t._v("当点击“新建任务”的时候，“成果数据基本信息.txt”文件中的这些数据将会保存到项目表（ProjectInfo）中进行存储，同时会在审查任务表中新建一条记录与这个项目绑定，其中核心字段如下：reviewState（审查状态）、taskAreaLevel（任务是哪个级别的用户上传的）、rolesName（上传用户拥有的角色）。")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/ec89023fafb3d3c557277f436a515c26/image-20200915151957144.png",alt:"image-20200915151957144"}}),t._v(" "),s("p",[t._v("我们将用户上传的成果包的层级结构保存在成果树（CatalogNode）表中，每个文件上传至 mongoDB 中，文件的详细信息存在资源文件表（ResourceFile）中。")]),t._v(" "),s("p",[t._v("由于历史遗留问题，这部分涉及到了 CS 档案系统，而且代码质量不高，好在这部分代码比较稳定，所以只需要了解下面画的流程即可，不建议大家阅读代码。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/ac0f3c5a530582b892eff76a792d3bdb/新建审查任务.png",alt:"新建审查任务"}}),t._v(" "),s("p",[t._v("不启动机器审查也可以点进去查看，那么我们先点进去看一下，在最左侧两个按钮，“规划成果”和“审查依据”。")]),t._v(" "),s("p",[t._v("其中规划成果展示的就是用户上传的成果包中的信息，我们可以在这里对其进行预览（部分矢量数据需要结合模型计算才能实现预览，会在下一篇文章中提及到的）。")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/7c36141f3dba2091ddad09710528cdfe/image-20200915162417838.png",alt:"image-20200915162417838"}}),t._v(" "),s("p",[t._v("审查依据中又分为工作依据和相关依据。")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/35a58fa7e8af6e11e3203304a2c8b5f6/image-20200915162736599.png",alt:"image-20200915162736599"}}),t._v(" "),s("p",[t._v("其中工作依据是通过任务首页中的“上传工作依据”按钮进行上传的：")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/16536e82ccb352559d4c40632726563a/image-20200915163654267.png",alt:"image-20200915163654267"}}),t._v(" "),s("blockquote",[s("p",[t._v("注：上传工作依据的时候，需要调用全文检索系统进行文件索引的建立。")])]),t._v(" "),s("p",[t._v("相关依据是在从档案系统同步成果包数据的时候同步过来的（看上面的流程图），数据来源为上传的成果包所在区域的上位和相邻区域的“规划文本”目录下的文件。")]),t._v(" "),s("p",[t._v("接下来，我们点击“启动机器审查”，那么机器审查到底是在做什么呢，这就又要引入一张表了：审查要点表（ReviewPoint），审查要点就是这个任务审查时需要考虑的要点，其中的数据来源全部来自于用户上传的成果包中（一些是成果包中的 excel、图片等文件，一些是通过成果包中的一些矢量数据，调用模型系统计算出来的数据），由于不同的区域级别和规划类型他们关注的要点也不同，所以在 ReviewPoint 表中也有这两个字段（belongAreaLevel、belongPlanType）来标识不同级别、规划类型的要点。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/5c34428de59166d8942be99af5c1bc70/image-20200915154132386.png",alt:"image-20200915154132386"}}),t._v(" "),s("p",[t._v("上面说了审查要点的一部分是来自于模型计算的结果，所以在审查要点表中有一个字段 fromModelCalculation 来标识是否来自模型计算，另外还有一个字段 participateCalc 来控制是否参与模型计算（也就是点击“机器审查”时是否计算这个模型）。")]),t._v(" "),s("blockquote",[s("p",[t._v("注：启动模型计算这个地方逻辑过于复杂，准备独立成一个模块放到下一篇文章中介绍，下面你可以假设模型已经计算完成了。")])]),t._v(" "),s("p",[t._v("接下来就开始人工审查的流程了，流程图如下：")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/5de75067aaff6927e0c770dd6d001ef0/image-20200915163745325.png",alt:"image-20200915163745325"}}),t._v(" "),s("p",[t._v("此时，我们可以点击进来，选择一个审查要点进行意见的填写：")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/9883af465f084b85c09efd0767f21844/image-20200915164018307.png",alt:"image-20200915164018307"}}),t._v(" "),s("p",[t._v("当意见填写完成之后，可以点击生成报告，生成报告之后才可以点击完成审查：")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/7163e8b7e52de2757a588194a8adac98/image-20200915164558336.png",alt:"image-20200915164558336"}}),t._v(" "),s("p",[t._v("完成审查时会将最近的审查报告复制一份到规划成果下，如下图：")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/2fd55c27251f5f40a36fd0ef6feccee8/image-20200915165109137.png",alt:"image-20200915165109137"}}),t._v(" "),s("p",[t._v("然后这个任务的整个生命周期就结束了，之后他就会进入“成果管理”中。")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/5e9bf9d85d1227cb5a40b0775940b761/image-20200915165928781.png",alt:"image-20200915165928781"}}),t._v(" "),s("h3",{attrs:{id:"_1-2-常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-常见问题"}},[t._v("#")]),t._v(" 1.2 常见问题")]),t._v(" "),s("h4",{attrs:{id:"_1）审查任务的查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1）审查任务的查询"}},[t._v("#")]),t._v(" 1）审查任务的查询")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/261963a8955fb89c66605a169f63bda5/image-20200917104737748.png"}}),t._v(" "),s("p",[s("strong",[t._v("接口：")]),t._v("/v5/reviewTask/page")]),t._v(" "),s("p",[t._v("**入参：**planType（规划类型）、level（区域等级，对应的 ProjectInfo 表中的 areaLevel 字段）、keyword（搜索关键词）、pageIndex、pageSize")]),t._v(" "),s("p",[s("strong",[t._v("代码逻辑：")])]),t._v(" "),s("p",[t._v("---------- controller")]),t._v(" "),s("ol",[s("li",[t._v("对 planType 和 level 进行参数校验")]),t._v(" "),s("li",[t._v("获取当前登录用户所在区域代码和用户具有的角色，封装到 query 对象中，调用 "),s("em",[t._v("service")]),t._v(" 层")])]),t._v(" "),s("p",[t._v("---------- service")]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[s("p",[t._v("获取传过来 query 对象中的“用户所在区域代码”，调用 ims 系统获取区域代码所在层级（ReviewTask 表中的 taskAreaLevel）")])]),t._v(" "),s("li",[s("p",[t._v("调用 dmn 层，根据 planType、areaLevel、keyword、taskAreaLevel、roles 查询出符合条件的"),s("strong",[t._v("报批")]),t._v("任务")])]),t._v(" "),s("li",[s("p",[t._v("采用“尾部去零法”过滤不是本级下的任务")])]),t._v(" "),s("li",[s("p",[t._v("因为需要展示成那种折叠的格式，所以需要根据 projectCode 进行分组折叠")])]),t._v(" "),s("li",[s("p",[t._v("使用分页工具类分页，返回 controller 层")])])]),t._v(" "),s("p",[t._v("---------- controller")]),t._v(" "),s("ol",{attrs:{start:"8"}},[s("li",[t._v("直接返回")])]),t._v(" "),s("p",[t._v("**常见迷惑点：**用户在页面上点击的市、县、乡对应的是 ProjectInfo 表的 areaLevel，而当前登录用户所处的级别对应的是 ReviewTask 表中的 taskAreaLevel，也就是说一个用户只能看到同一级别用户上传的市、县、乡的任务。")]),t._v(" "),s("p",[t._v("例 1：县级（taskAreaLevel）用户上传的县级（areaLevel）任务，市级（taskAreaLevel）用户是没法看到的")]),t._v(" "),s("p",[t._v("例 2：市级（taskAreaLevel）用户上传的县级（areaLevel）任务，市级（taskAreaLevel）用户是能看到的")]),t._v(" "),s("blockquote",[s("p",[t._v("注：当然还要考虑角色，查询的时候还要根据角色进行一次过滤。")])]),t._v(" "),s("h4",{attrs:{id:"_2）向上提交"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2）向上提交"}},[t._v("#")]),t._v(" 2）向上提交")]),t._v(" "),s("p",[t._v("这个是个隐藏功能，我觉得产品在设计有缺陷，遇到问题再找我吧，不想讲了。")]),t._v(" "),s("blockquote",[s("p",[t._v("注：是否能看到向上提交是由前端控制的。")])]),t._v(" "),s("h4",{attrs:{id:"_3）文件预览"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3）文件预览"}},[t._v("#")]),t._v(" 3）文件预览")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/1a3ee122765f9a1ff94ec399f50f03ed/image-20200917110103794.png",alt:"image-20200917110103794"}}),t._v(" "),s("p",[s("strong",[t._v("接口：")]),t._v("/v2/fileUrl/{resourceId}")]),t._v(" "),s("p",[t._v("**入参：**resourceId（资源文件 id，对应的是 ResourceFile 表的 id）")]),t._v(" "),s("p",[s("strong",[t._v("代码逻辑：")])]),t._v(" "),s("blockquote",[s("p",[t._v("注：此处的代码逻辑只讲 officeOnline 的预览，图片的预览没啥可讲的，mdb、gdb 的参见下一篇文章。")])]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@GetMapping")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/v2/fileUrl/{resourceId}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ApiOperation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"根据资源文件id，返回url实现文件预览"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" httpMethod "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GET"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseData")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getFileUrlByResourceId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PathVariable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resourceId"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" resourceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resourceId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IllegalParameterException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"输入的资源文件id错误！"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1)")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceCommand")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" command "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" resourceCommandFactory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resourceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2）")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceFileUrlVO")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" resourceFileUrlVO "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CommandExecuteService")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resourceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("httpServletRequest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResponseUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("success")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resourceFileUrlVO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br")])]),s("p",[t._v("本部分代码采用了简单工厂和命令模式，第一句就是根据一系列判断条件找到合适的命令：")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/9598665719820b1f67ee82e4bc240fc7/image-20200917110722375.png",alt:"image-20200917110722375"}}),t._v(" "),s("p",[t._v("第二句就是执行命令，没啥可说的，我们看具体的命令对象：OfficeOnlineCommand")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * 执行命令\n *\n * @param resourceId 资源文件id\n * @param request    本次请求对象\n * @return 资源文件信息的实体（url或数据）\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceFileUrlVO")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Long")]),t._v(" resourceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HttpServletRequest")]),t._v(" request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取应用url")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" applicationUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContextPathUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getBaseURL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取相应文件类型的uri")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取文件信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceFileDTO")]),t._v(" resourceFileDTO "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" reviewResourceBizService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getResourceFileByResourceFileId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resourceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取文件后缀（不带.的）")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" suffix "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" resourceFileDTO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSuffix")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("suffix"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("contains")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"."')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    suffix "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" suffix"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" suffix"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("length")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toLowerCase")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" uri "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("GlobalConstant")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("OFFICE_ONLINE_PROPERTIES"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("suffix"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拼装重定向url")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" officeOnlineUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" uri "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" applicationUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" OFFICE_WOPI "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" resourceId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 封装返回的信息")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceFileUrlVO")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Void")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" resourceFileUrlVO "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ResourceFileUrlVO")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  resourceFileUrlVO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setType")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resourceFileType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  resourceFileUrlVO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("FALSE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  resourceFileUrlVO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUrl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" resourceFileUrlVO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br")])]),s("p",[t._v("注释应该写的很清楚了，返回的 url 格式为：")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/414cfafbd9a978320697b7a7899b6b00/image-20200917111524577.png",alt:"image-20200917111524577"}}),t._v(" "),s("p",[t._v("OfficeOnline 接收到请求的时候首先会请求：http://52.83.103.252:8086/dgp-server-web-nr/wopi/files/14779581这个地址，将会被我们系统的 WopiFilter 进行拦截，此时我们会返回 14779581（这个是 resourceFileId） 对应的文件的元数据，此时 OfficeOnline 就会检查是否本地已经有这个文件了，如果没有的话，则会请求 http://52.83.103.252:8086/dgp-server-web-nr/wopi/files/14779581/contents 进行文件的下载（这个地址也会被 WopiFilter 拦截，具体可以看代码），然后就可以预览了。")]),t._v(" "),s("p",[t._v("所以加入 OfficeOnline 预览有了问题，可以进行 F12 抓包，抓到这个地址：http://52.83.96.20/x/_layouts/xlviewerinternal.aspx?WOPISrc=http://52.83.103.252:8086/dgp-server-web-nr/wopi/files/14779581，然后我们请求 http://52.83.103.252:8086/dgp-server-web-nr/wopi/files/14779581/contents 看看下载下的文件是否有问题，如果文件没问题，那么就是 OfficeOnline 服务器的问题了，就可以找实施了。")]),t._v(" "),s("blockquote",[s("p",[t._v("注：返回给 officeOnline 的文件元数据必须要有后缀名。")])]),t._v(" "),s("h4",{attrs:{id:"_4）保存工作依据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4）保存工作依据"}},[t._v("#")]),t._v(" 4）保存工作依据")]),t._v(" "),s("p",[t._v("接口：/v1/workBasis/{planType}/{areaLevel}/{path}（上传接口：/v1/temp/workBasis）")]),t._v(" "),s("p",[t._v("入参：planType、areaLevel、path（在 mongo 中的唯一标识）")]),t._v(" "),s("p",[t._v("代码逻辑：没啥可讲的，主要想说的是这句代码：")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 推送文件到全文检索")]),t._v("\nsearchService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createSearchIndex")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("workBasisNodeType"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("p",[t._v("上传工作依据的时候需要向全文检索系统建立索引，调用时采用的 Feign，所以当上传工作依据报错 FeignException 的话，请直接找实施启动全文检索系统。")]),t._v(" "),s("h4",{attrs:{id:"_5）如何删除审查任务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5）如何删除审查任务"}},[t._v("#")]),t._v(" 5）如何删除审查任务")]),t._v(" "),s("p",[t._v("第一步：因为部分任务状态（例如：已完成、机审中）不能进行任务的删除，所以需要进入审查任务表中，将需要删除的审查任务的 ReviewState 改为 0。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/dc29b548b374f653268cd0ef1c838e44/image-20200918124718078.png",alt:"image-20200918124718078"}}),t._v(" "),s("p",[t._v("第二步：找到 http://52.83.103.252:8086/dgp-server-web-nr/swagger-ui.html#/ARS-ReviewTaskController/batchDelReviewTaskUsingDELETE 接口，将需要删除的审查任务 id 写到请求的数组中。")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/50d9c38c2d5c5c1f0e5f9a8676191bb2/image-20200918124927998.png",alt:"image-20200918124927998"}}),t._v(" "),s("h2",{attrs:{id:"二、成果管理模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、成果管理模块"}},[t._v("#")]),t._v(" 二、成果管理模块")]),t._v(" "),s("img",{staticStyle:{zoom:"50%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/aca8525f3c7d01c9ef06946d8a0ad075/image-20200918132034807.png",alt:"image-20200918132034807"}}),t._v(" "),s("p",[t._v("之前也提到过，成果管理页面展示的是"),s("strong",[t._v("最近一次审查完成的任务")]),t._v("和"),s("strong",[t._v("批复成果包")]),t._v("，所以我们先看下批复成果包的上传")]),t._v(" "),s("h3",{attrs:{id:"_1）上传批复成果"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1）上传批复成果"}},[t._v("#")]),t._v(" 1）上传"),s("strong",[t._v("批复")]),t._v("成果")]),t._v(" "),s("p",[t._v("批复成果包：链接: https://pan.baidu.com/s/1jMAAhLX4LNo9dj6_iauQ5g 密码: 8eo4")]),t._v(" "),s("img",{staticStyle:{zoom:"33%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/181b025e02583d223db9a34261ff76e8/image-20200918133137876.png",alt:"image-20200918133137876"}}),t._v(" "),s("p",[t._v("上传完成的时候，你可以看到展示的这条记录的成果版本从【报批稿】变成了【批复稿】，成果阶段从【一审】变成了【已批复】，此时没有办法再从"),s("strong",[t._v("成果审查")]),t._v("上传"),s("em",[t._v("相同")]),t._v("【区域+规划类型+区域级别+起始年+目标年 => 版本】的批复成果包，证明这个版本的成果包已经彻底审查完成。")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/3daf61403b6dd6a2751f6d17617414a6/image-20200918133346801.png",alt:"image-20200918133346801"}})]),t._v(" "),s("h3",{attrs:{id:"_2）展示的区域树"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2）展示的区域树"}},[t._v("#")]),t._v(" 2）展示的区域树")]),t._v(" "),s("p",[t._v("区域树只会展示有批复或者已经审查完成的区域。")]),t._v(" "),s("h3",{attrs:{id:"_3）折叠方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3）折叠方式"}},[t._v("#")]),t._v(" 3）折叠方式")]),t._v(" "),s("p",[t._v("折叠方式为：区域代码 + 区域名称 + 规划类型 + （ + 规划目标年 + ）")]),t._v(" "),s("p",[t._v("完结撒花~")])])}),[],!1,null,null,null);a.default=n.exports}}]);