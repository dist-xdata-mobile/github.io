(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{477:function(t,e,a){"use strict";a.r(e);var v=a(6),_=Object(v.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"nuget-学习总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nuget-学习总结"}},[t._v("#")]),t._v(" NuGet 学习总结")]),t._v(" "),a("blockquote",[a("p",[t._v("作者:陶小明 时间： 2020-10-16")])]),t._v(" "),a("h2",{attrs:{id:"一、nuget-介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、nuget-介绍"}},[t._v("#")]),t._v(" 一、NuGet 介绍")]),t._v(" "),a("p",[t._v("NuGet 作为.net 软件包托管平台，方便开发者访问其他开发者发布的程序包，令在项目中添加、移除和更新引用程序集更加快捷。")]),t._v(" "),a("p",[t._v("NuGet 程序包源分为公共库与私有库。用户可通过公共库下载一些常用的组件，比如 log4net.dll、Newtonsoft.Json.dll 等，并利用 NuGet 对这些组件进行管理、版本更新、删除。然而对于公司内部的公共组件，各个项目都需要使用，不可能发布到公共库中；因此，可以搭建公司私有 NuGet 服务器，建立私有组件库。")]),t._v(" "),a("p",[t._v("Nuget 客户端工具主要有 NuGet CLI 工具：dotnet.exe 和 nuget.exe 和 Visual\nStudio 集成的 Nuget，区别如下表 1.1。")]),t._v(" "),a("p",[t._v("表 1.1 Nuget 客户端工具介绍表")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("工具")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("dotnet.exe")]),t._v(" "),a("td",[t._v("包含在 .NET Core SDK 中，并在所有平台上提供核心 NuGet 功能")])]),t._v(" "),a("tr",[a("td",[t._v("nuget.exe")]),t._v(" "),a("td",[t._v("提供 Windows 上的所有 NuGet 功能以及 Mac 和 Linux 上在 Mono 下运行时的大多数功能。")])]),t._v(" "),a("tr",[a("td",[t._v("Visual Studio")]),t._v(" "),a("td",[t._v("在 Windows 上，通过包管理器 UI 和包管理器控制台提供 NuGet 功能；包含在与 .NET 相关的工作负荷中。 在 Mac 上，通过 UI 提供某些功能。 在 Visual Studio Code 中，通过扩展提供 NuGet 功能。")])])])]),t._v(" "),a("h2",{attrs:{id:"二、vs-平台下的-nuget-工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、vs-平台下的-nuget-工具"}},[t._v("#")]),t._v(" 二、VS 平台下的 NuGet 工具")]),t._v(" "),a("p",[t._v("VS2010 及先前版本可以通过工具->拓展管理器，搜索 NuGet Package\nManage 安装。从 VS2012 开始集成了 NuGet 工具。工具由程序包管理控制台、NutGut 程序包管理器、程序包管理器设置组成。")]),t._v(" "),a("h3",{attrs:{id:"_2-1-程序包管理控制台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-程序包管理控制台"}},[t._v("#")]),t._v(" 2.1 程序包管理控制台")]),t._v(" "),a("p",[t._v("打开控制台，设置程序包源和默认项目，通过若干命令对程序包进行管理，常用命令如表 2.1。")]),t._v(" "),a("p",[t._v("表 2.1 Nuget 控制台常用命令表")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("命令")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Find-Package")]),t._v(" "),a("td",[t._v("获取指定的 ID 或包含关键字程序包集")])]),t._v(" "),a("tr",[a("td",[t._v("Get-Package")]),t._v(" "),a("td",[t._v("获取指定的 ID 的程序包")])]),t._v(" "),a("tr",[a("td",[t._v("Install-Package")]),t._v(" "),a("td",[t._v("安装程序包")])]),t._v(" "),a("tr",[a("td",[t._v("Uninstall-Package")]),t._v(" "),a("td",[t._v("卸载程序包")])]),t._v(" "),a("tr",[a("td",[t._v("Update-Package")]),t._v(" "),a("td",[t._v("更新程序包")])]),t._v(" "),a("tr",[a("td",[t._v("Get-Project")]),t._v(" "),a("td",[t._v("获取项目信息")])])])]),t._v(" "),a("h3",{attrs:{id:"_2-2-nuget-程序包管理器-ui"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-nuget-程序包管理器-ui"}},[t._v("#")]),t._v(" 2.2 NuGet 程序包管理器 UI")]),t._v(" "),a("p",[t._v("打开方法：")]),t._v(" "),a("p",[t._v("1）通过工具->NuGet 包管理器->管理解决方案的 Nuget 程序包；")]),t._v(" "),a("p",[t._v("2）/选择项目-》右键选择管理 Nuget 程序包。")]),t._v(" "),a("p",[t._v("功能如下：")]),t._v(" "),a("p",[t._v("浏览：指定资源网站，查看程序包；")]),t._v(" "),a("p",[t._v("已安装：对已安装包进行管理；")]),t._v(" "),a("p",[t._v("更新：更新现有包；")]),t._v(" "),a("p",[t._v("合并：合并程序包。")]),t._v(" "),a("h3",{attrs:{id:"_2-3-程序包管理器设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-程序包管理器设置"}},[t._v("#")]),t._v(" 2.3 程序包管理器设置")]),t._v(" "),a("p",[t._v("程序包源管理可以删除、添加自定义程序包源，如图所示：nuget.org 为 nuget 程序包源公共库，Microsoft\nVisual Studio Offline Packages 为本地的 VS 组件库，如图 2.1。")]),t._v(" "),a("p",[t._v("图 2.1 程序包管理器设置界面")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/26a8595f2ff1aaeb8e58bd8a479aba2b/%E7%A8%8B%E5%BA%8F%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8%E8%AE%BE%E7%BD%AE%E7%95%8C%E9%9D%A2.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"三、自定义程序包托管网站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、自定义程序包托管网站"}},[t._v("#")]),t._v(" 三、自定义程序包托管网站")]),t._v(" "),a("h3",{attrs:{id:"_3-1-建立共享文件夹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-建立共享文件夹"}},[t._v("#")]),t._v(" 3.1 建立共享文件夹")]),t._v(" "),a("p",[t._v("（1）设置共享文件夹 nupkg，权限设置 Everyone，如图 3.1 所示。")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/02da41787eb3594a4766992718c01a6f/%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9%E8%AE%BE%E7%BD%AE%E7%A4%BA%E6%84%8F%E5%9B%BE.png",alt:""}})]),t._v(" "),a("p",[t._v("​ 图 3.1 共享文件夹设置示意图")]),t._v(" "),a("p",[t._v("（2）将打包好的程序包复制到 package 中。")]),t._v(" "),a("p",[t._v("（3）在 VS 程序包源设置中添加该访问共享文件夹网络路径，如图 3.2 所示，PackageShare 为共享目录。")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/7ff43f177de7e0c1b9f170d0aa1e7356/%E6%B7%BB%E5%8A%A0%E5%85%B1%E4%BA%AB%E7%9B%AE%E5%BD%95%E7%A8%8B%E5%BA%8F%E5%8C%85%E6%BA%90%E7%95%8C%E9%9D%A2.png",alt:""}})]),t._v(" "),a("p",[t._v("​ 图 3.2 添加共享目录程序包源界面")]),t._v(" "),a("h3",{attrs:{id:"_3-2-搭建-nuget-服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-搭建-nuget-服务器"}},[t._v("#")]),t._v(" 3.2 搭建 Nuget 服务器")]),t._v(" "),a("p",[t._v("（1）新建空的 ASP.NET，选择.NET4.6 及以上框架；")]),t._v(" "),a("p",[t._v("（2）下载 NuGet.Server，安装；")]),t._v(" "),a("p",[t._v("（3）打开 Web.config，修改配置文件：设置 packagesPath 与 apiKey；")]),t._v(" "),a("p",[t._v("（4）将.pkg 程序包复制到 packages 文件夹中。")]),t._v(" "),a("p",[t._v("（5）部署到 IIS：直接发布到 IIS 或者手动部署到 IIS 中。手动部署 IIS 步骤如下：")]),t._v(" "),a("p",[t._v("1）选择项目右键->发布，配置文件选择“新建配置文件”，")]),t._v(" "),a("p",[t._v("2）点击“连接”栏，发布方法选择“文件系统”，确定目标位置，如图 3.3 所示；")]),t._v(" "),a("p",[t._v("3）发布。")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/2022ffddb99e8c6dbb8ba8d4e77106eb/%E5%8F%91%E5%B8%83%E7%BD%91%E7%AB%99%E7%A4%BA%E6%84%8F%E5%9B%BE.png",alt:""}})]),t._v(" "),a("p",[t._v("​ 图 3.3 发布网站示意图")]),t._v(" "),a("p",[t._v("4）搭建 IIS 站点。")]),t._v(" "),a("p",[t._v("新建应用程序池；")]),t._v(" "),a("p",[t._v("添加网站，物理路径选择 ASP.NET 项目发布的路径；")]),t._v(" "),a("p",[t._v("启动。浏览网站，如图 3.4 所示，说明 NuGet 服务器搭建成功。点击查看程序包可查看服务器已有的组件。")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/3465a82753818152b8499d3d76f50ee2/%E6%B5%8F%E8%A7%88%E7%BD%91%E7%AB%99%E7%A4%BA%E6%84%8F%E5%9B%BE.png",alt:""}})]),t._v(" "),a("p",[t._v("​ 图 3.4 浏览网站示意图")]),t._v(" "),a("h2",{attrs:{id:"四、类库打包发布"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、类库打包发布"}},[t._v("#")]),t._v(" 四、类库打包发布")]),t._v(" "),a("p",[t._v("将自己类库打包成.pkg 文件，这些程序包可以托管到 NuGet 程序包源中，可以是 nuget 官网或者自己的 Nuget 服务器中。下面介绍通过 NuGetPackageExplorer 工具打包。")]),t._v(" "),a("h3",{attrs:{id:"_4-1-图形界面打包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-图形界面打包"}},[t._v("#")]),t._v(" 4.1 图形界面打包")]),t._v(" "),a("p",[t._v("（1）下载包包管理器 NuGetPackageExplorer，安装。地址：")]),t._v(" "),a("p",[t._v("（2）新建包，填写程序包信息，部分界面如图 4.1 所示：")]),t._v(" "),a("p",[t._v("ID:用于定位类库包的唯一标识；")]),t._v(" "),a("p",[t._v("Version:类库的版本号，这里建议和程序集的真实版本号保持一致，以免发生混淆,\n根据实际情况添加依赖类库的 Id 和版本号。")]),t._v(" "),a("p",[t._v("Dependencies:此类库依赖的程序集，且填写的依赖类库需要在 NuGet 服务器上能找到，否则无法完成自动引用添加。")]),t._v(" "),a("p",[t._v("Framework assemblies:依赖的 Framework\n程序集，根据实际需要选择即可，一般无需设置；")]),t._v(" "),a("img",{staticStyle:{zoom:"60%"},attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/300ccb768ed158197f677dcb391b5b46/Explorer%E7%BC%96%E8%BE%91%E5%8C%85%E7%95%8C%E9%9D%A2.png"}}),t._v(" "),a("p",[t._v("​ 图 4.1 Explorer 编辑包界面")]),t._v(" "),a("blockquote",[a("p",[t._v("（3）添加.dll 文件")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/55c210c774a4c1151ab0b9168cb4d54e/%E5%8D%95%E4%B8%AAdll%E6%89%93%E5%8C%85%E7%A4%BA%E6%84%8F%E5%9B%BE.png",alt:""}})])]),t._v(" "),a("p",[t._v("​ 图 4.2 单个 dll 打包示意图")]),t._v(" "),a("blockquote",[a("p",[t._v("若有多个.net 版本，则添加多个版本 dll；")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/0a7513fbc5c32d534d5d920832d129f0/%E5%A4%9A.net%E6%A1%86%E6%9E%B6dll%E6%89%93%E5%8C%85%E7%A4%BA%E6%84%8F%E5%9B%BE.png",alt:""}})])]),t._v(" "),a("p",[t._v("​ 图 4.3 多.net 框架 dll 打包示意图")]),t._v(" "),a("blockquote",[a("p",[t._v("（4）保存为.nupkg 类型文件；")])]),t._v(" "),a("blockquote",[a("p",[t._v("（5）发布，选择 File->publish,发布界面如图 4.4 所示，表示发布成功。若发布到官网http://nuget.org/上，则先注册账号，生成Key，再发布，或者使用官网的Upload工具，选择.nupkg程序包上传。")]),t._v(" "),a("p",[a("img",{attrs:{src:"http://elb-791125809.cn-northwest-1.elb.amazonaws.com.cn:5335//fellow-travellers/picgorepo/uploads/fd05dac7eefc94bf3cd64511eebfba8d/%E5%8F%91%E5%B8%83%E7%A8%8B%E5%BA%8F%E5%8C%85%E7%95%8C%E9%9D%A2.png",alt:""}})])]),t._v(" "),a("p",[t._v("​ 图 4.4 发布程序包界面")]),t._v(" "),a("p",[t._v("注意：程序包版本号不能重复使用。")])])}),[],!1,null,null,null);e.default=_.exports}}]);